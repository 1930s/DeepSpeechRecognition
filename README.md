# CTC中文语音识别

[![GPL-3.0 Licensed](https://img.shields.io/badge/License-GPL3.0-blue.svg?style=flat)](https://opensource.org/licenses/GPL-3.0) [![TensorFlow Version](https://img.shields.io/badge/Tensorflow-1.4+-blue.svg)](https://www.tensorflow.org/) [![Keras Version](https://img.shields.io/badge/Keras-2.0+-blue.svg)](https://keras.io/) [![Python Version](https://img.shields.io/badge/Python-3.x-blue.svg)](https://www.python.org/) 
### 基于keras的中文语音识别
- 该项目实现了GRU-CTC中文语音识别，所有代码都在`gru_ctc_am.py`中，包括：
   - 音频文件特征提取
   - 文本数据处理
   - 数据格式处理
   - 构建模型
   - 模型训练及解码
- 新增加了CNN-CTC结构的中文语音识别模型`cnn_ctc_am.py`，与GRU相比，对网络结构进行了稍加改造。
- 之外还包括将aishell数据处理为thchs30数据格式，合并数据进行训练。代码及数据放在`gen_aishell_data`中。

默认数据集为thchs30，参考gen_aishell_data中的数据及代码，也可以使用aishell的数据进行训练。

#### 音频文件特征提取
```python
# -----------------------------------------------------------------------------------------------------
'''
&usage:		[audio]对音频文件进行处理，包括生成总的文件列表、特征提取等
'''
# -----------------------------------------------------------------------------------------------------
# 生成音频列表
def genwavlist(wavpath):

# 对音频文件提取mfcc特征
def compute_mfcc(file):
```
#### 文本数据处理
```python
# -----------------------------------------------------------------------------------------------------
'''
&usage:		[text]对文本标注文件进行处理，包括生成拼音到数字的映射，以及将拼音标注转化为数字的标注转化
'''
# -----------------------------------------------------------------------------------------------------
# 利用训练数据生成词典
def gendict(textfile_path):

# 文本转化为数字
def text2num(textfile_path):
```
#### 数据格式处理
```python
# -----------------------------------------------------------------------------------------------------
'''
&usage:		[data]数据生成器构造，用于训练的数据生成，包括输入特征及标注的生成，以及将数据转化为特定格式
'''
# -----------------------------------------------------------------------------------------------------
# 将数据格式整理为能够被网络所接受的格式，被data_generator调用
def get_batch(x, y, train=False, max_pred_len=50, input_length=500):

# 数据生成器，默认音频为thchs30\train,默认标注为thchs30\train.syllable,被模型训练方法fit_generator调用
def data_generate(wavpath = 'E:\\Data\\data_thchs30\\train', textfile = 'E:\\Data\\thchs30\\train.syllable.txt', bath_size=4):
```
#### 构建模型
```python
# -----------------------------------------------------------------------------------------------------
'''
&usage:		[net model]构件网络结构，用于最终的训练和识别
'''
# -----------------------------------------------------------------------------------------------------
# 被creatModel调用，用作ctc损失的计算
def ctc_lambda(args):

# 构建网络结构，用于模型的训练和识别
def creatModel():
```
#### 模型训练及解码
```python
# -----------------------------------------------------------------------------------------------------
'''
&usage:		模型的解码，用于将数字信息映射为拼音
'''
# -----------------------------------------------------------------------------------------------------
# 对model预测出的softmax的矩阵，使用ctc的准则解码，然后通过字典num2word转为文字
def decode_ctc(num_result, num2word):

# -----------------------------------------------------------------------------------------------------
'''
&usage:		模型的训练
'''
# -----------------------------------------------------------------------------------------------------
# 训练模型
def train():

# -----------------------------------------------------------------------------------------------------
'''
&usage:		模型的测试，看识别结果是否正确
'''
# -----------------------------------------------------------------------------------------------------
# 测试模型
def test():
```

#### aishell数据转化
将aishell中的汉字标注转化为拼音标注，利用该数据与thchs30数据训练同样的网络结构。



该模型作为一个练手小项目。
没有使用语言模型，直接简单建模。

[我的github: https://github.com/audier](https://github.com/audier)

[我的博客: https://blog.csdn.net/chinatelecom08](https://blog.csdn.net/chinatelecom08)
